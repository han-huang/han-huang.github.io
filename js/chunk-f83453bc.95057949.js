(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f83453bc"],{"057f":function(t,e,n){var r=n("fc6a"),i=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?c(t):i(r(t))}},"13d5":function(t,e,n){"use strict";var r=n("23e7"),i=n("d58f").left,o=n("a640"),a=n("ae40"),c=o("reduce"),s=a("reduce",{1:0});r({target:"Array",proto:!0,forced:!c||!s},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"4de4":function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").filter,o=n("1dde"),a=n("ae40"),c=o("filter"),s=a("filter");r({target:"Array",proto:!0,forced:!c||!s},{filter:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var r=n("ade3");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var r=n("1d80"),i=n("5899"),o="["+i+"]",a=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),s=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:s(1),end:s(2),trim:s(3)}},"5e89":function(t,e,n){var r=n("861d"),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},7156:function(t,e,n){var r=n("861d"),i=n("d2bb");t.exports=function(t,e,n){var o,a;return i&&"function"==typeof(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&i(t,a),t}},"746f":function(t,e,n){var r=n("428f"),i=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol={});i(e,t)||a(e,t,{value:o.f(t)})}},7947:function(t,e,n){},"8ba4":function(t,e,n){var r=n("23e7"),i=n("5e89");r({target:"Number",stat:!0},{isInteger:i})},a4d3:function(t,e,n){"use strict";var r=n("23e7"),i=n("da84"),o=n("d066"),a=n("c430"),c=n("83ab"),s=n("4930"),u=n("fdbf"),l=n("d039"),f=n("5135"),d=n("e8b5"),p=n("861d"),b=n("825a"),h=n("7b0b"),g=n("fc6a"),v=n("c04e"),m=n("5c6c"),y=n("7c73"),S=n("df75"),k=n("241c"),O=n("057f"),w=n("7418"),P=n("06cf"),I=n("9bf2"),x=n("d1e7"),C=n("9112"),_=n("6eeb"),N=n("5692"),j=n("f772"),A=n("d012"),E=n("90e3"),$=n("b622"),T=n("e538"),Q=n("746f"),F=n("d44e"),q=n("69f3"),D=n("b727").forEach,M=j("hidden"),R="Symbol",J="prototype",V=$("toPrimitive"),G=q.set,L=q.getterFor(R),H=Object[J],U=i.Symbol,X=o("JSON","stringify"),Y=P.f,W=I.f,z=O.f,B=x.f,K=N("symbols"),Z=N("op-symbols"),tt=N("string-to-symbol-registry"),et=N("symbol-to-string-registry"),nt=N("wks"),rt=i.QObject,it=!rt||!rt[J]||!rt[J].findChild,ot=c&&l((function(){return 7!=y(W({},"a",{get:function(){return W(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=Y(H,e);r&&delete H[e],W(t,e,n),r&&t!==H&&W(H,e,r)}:W,at=function(t,e){var n=K[t]=y(U[J]);return G(n,{type:R,tag:t,description:e}),c||(n.description=e),n},ct=u?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof U},st=function(t,e,n){t===H&&st(Z,e,n),b(t);var r=v(e,!0);return b(n),f(K,r)?(n.enumerable?(f(t,M)&&t[M][r]&&(t[M][r]=!1),n=y(n,{enumerable:m(0,!1)})):(f(t,M)||W(t,M,m(1,{})),t[M][r]=!0),ot(t,r,n)):W(t,r,n)},ut=function(t,e){b(t);var n=g(e),r=S(n).concat(bt(n));return D(r,(function(e){c&&!ft.call(n,e)||st(t,e,n[e])})),t},lt=function(t,e){return void 0===e?y(t):ut(y(t),e)},ft=function(t){var e=v(t,!0),n=B.call(this,e);return!(this===H&&f(K,e)&&!f(Z,e))&&(!(n||!f(this,e)||!f(K,e)||f(this,M)&&this[M][e])||n)},dt=function(t,e){var n=g(t),r=v(e,!0);if(n!==H||!f(K,r)||f(Z,r)){var i=Y(n,r);return!i||!f(K,r)||f(n,M)&&n[M][r]||(i.enumerable=!0),i}},pt=function(t){var e=z(g(t)),n=[];return D(e,(function(t){f(K,t)||f(A,t)||n.push(t)})),n},bt=function(t){var e=t===H,n=z(e?Z:g(t)),r=[];return D(n,(function(t){!f(K,t)||e&&!f(H,t)||r.push(K[t])})),r};if(s||(U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=E(t),n=function(t){this===H&&n.call(Z,t),f(this,M)&&f(this[M],e)&&(this[M][e]=!1),ot(this,e,m(1,t))};return c&&it&&ot(H,e,{configurable:!0,set:n}),at(e,t)},_(U[J],"toString",(function(){return L(this).tag})),_(U,"withoutSetter",(function(t){return at(E(t),t)})),x.f=ft,I.f=st,P.f=dt,k.f=O.f=pt,w.f=bt,T.f=function(t){return at($(t),t)},c&&(W(U[J],"description",{configurable:!0,get:function(){return L(this).description}}),a||_(H,"propertyIsEnumerable",ft,{unsafe:!0}))),r({global:!0,wrap:!0,forced:!s,sham:!s},{Symbol:U}),D(S(nt),(function(t){Q(t)})),r({target:R,stat:!0,forced:!s},{for:function(t){var e=String(t);if(f(tt,e))return tt[e];var n=U(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!ct(t))throw TypeError(t+" is not a symbol");if(f(et,t))return et[t]},useSetter:function(){it=!0},useSimple:function(){it=!1}}),r({target:"Object",stat:!0,forced:!s,sham:!c},{create:lt,defineProperty:st,defineProperties:ut,getOwnPropertyDescriptor:dt}),r({target:"Object",stat:!0,forced:!s},{getOwnPropertyNames:pt,getOwnPropertySymbols:bt}),r({target:"Object",stat:!0,forced:l((function(){w.f(1)}))},{getOwnPropertySymbols:function(t){return w.f(h(t))}}),X){var ht=!s||l((function(){var t=U();return"[null]"!=X([t])||"{}"!=X({a:t})||"{}"!=X(Object(t))}));r({target:"JSON",stat:!0,forced:ht},{stringify:function(t,e,n){var r,i=[t],o=1;while(arguments.length>o)i.push(arguments[o++]);if(r=e,(p(e)||void 0!==t)&&!ct(t))return d(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!ct(e))return e}),i[1]=e,X.apply(null,i)}})}U[J][V]||C(U[J],V,U[J].valueOf),F(U,R),A[M]=!0},a9e3:function(t,e,n){"use strict";var r=n("83ab"),i=n("da84"),o=n("94ca"),a=n("6eeb"),c=n("5135"),s=n("c6b6"),u=n("7156"),l=n("c04e"),f=n("d039"),d=n("7c73"),p=n("241c").f,b=n("06cf").f,h=n("9bf2").f,g=n("58a8").trim,v="Number",m=i[v],y=m.prototype,S=s(d(y))==v,k=function(t){var e,n,r,i,o,a,c,s,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=g(u),e=u.charCodeAt(0),43===e||45===e){if(n=u.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=u.slice(2),a=o.length,c=0;c<a;c++)if(s=o.charCodeAt(c),s<48||s>i)return NaN;return parseInt(o,r)}return+u};if(o(v,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var O,w=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof w&&(S?f((function(){y.valueOf.call(n)})):s(n)!=v)?u(new m(k(e)),n,w):k(e)},P=r?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),I=0;P.length>I;I++)c(m,O=P[I])&&!c(w,O)&&h(w,O,b(m,O));w.prototype=y,y.constructor=w,a(i,v,w)}},ade3:function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},d58f:function(t,e,n){var r=n("1c0b"),i=n("7b0b"),o=n("44ad"),a=n("50c4"),c=function(t){return function(e,n,c,s){r(n);var u=i(e),l=o(u),f=a(u.length),d=t?f-1:0,p=t?-1:1;if(c<2)while(1){if(d in l){s=l[d],d+=p;break}if(d+=p,t?d<0:f<=d)throw TypeError("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=p)d in l&&(s=n(s,l[d],d,u));return s}};t.exports={left:c(!1),right:c(!0)}},d81d:function(t,e,n){"use strict";var r=n("23e7"),i=n("b727").map,o=n("1dde"),a=n("ae40"),c=o("map"),s=a("map");r({target:"Array",proto:!0,forced:!c||!s},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,n){var r=n("23e7"),i=n("83ab"),o=n("56ef"),a=n("fc6a"),c=n("06cf"),s=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,r=a(t),i=c.f,u=o(r),l={},f=0;while(u.length>f)n=i(r,e=u[f++]),void 0!==n&&s(l,e,n);return l}})},de9f:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",[n("div",{staticClass:"col-md-12"},[n("div",{staticClass:"progressbar-container text-center"},[n("ul",{staticClass:"progressbar"},[n("li",{staticClass:"progressbar-active"},[t._v("檢視購物車")]),n("li",[t._v("付款方式及寄送資訊")]),n("li",[t._v("確認訂單資料")]),n("li",[t._v("訂單成立")])])])])]),n("b-row",{staticClass:"mt-3"},[n("b-col",{attrs:{lg:"12",md:"12"}},[n("b-tabs",[n("b-tab",{attrs:{title:"購物明細"}},[n("b-form",[n("b-table",{ref:"selectableTable",attrs:{striped:"",hover:"",stacked:"lg",fields:t.fields,items:t.items,"head-variant":t.headVariant},scopedSlots:t._u([{key:"head(checkbox)",fn:function(){return[n("input",{directives:[{name:"model",rawName:"v-model",value:t.allSelected,expression:"allSelected"}],staticClass:"checkAll",attrs:{type:"checkbox",id:"checkAll",name:"checkAll"},domProps:{checked:Array.isArray(t.allSelected)?t._i(t.allSelected,null)>-1:t.allSelected},on:{change:[function(e){var n=t.allSelected,r=e.target,i=!!r.checked;if(Array.isArray(n)){var o=null,a=t._i(n,o);r.checked?a<0&&(t.allSelected=n.concat([o])):a>-1&&(t.allSelected=n.slice(0,a).concat(n.slice(a+1)))}else t.allSelected=i},function(e){return t.toggleAll(t.allSelected)}]}})]},proxy:!0},{key:"cell()",fn:function(e){return[n("span",{domProps:{textContent:t._s(e.value)}})]}},{key:"cell(checkbox)",fn:function(e){return[n("input",{key:"checkbox"+e.item.isbn,attrs:{type:"checkbox",id:"checkbox"+e.item.isbn},domProps:{value:e.item.isbn,checked:e.item.checked},on:{change:function(e){return t.setChecked(e)}}})]}},{key:"cell(pic)",fn:function(t){return[n("router-link",{attrs:{to:"/product/"+t.item.isbn}},[n("img",{staticStyle:{display:"block",margin:"0 auto",height:"100px"},attrs:{src:t.item.src,alt:""}})])]}},{key:"cell(name)",fn:function(e){return[n("router-link",{staticClass:"text-decoration-none text-primary",attrs:{to:"/product/"+e.item.isbn}},[n("span",{domProps:{textContent:t._s(e.value)}})])]}},{key:"cell(salePrice)",fn:function(e){return[n("span",{domProps:{textContent:t._s(t.salePrice(e))}})]}},{key:"cell(quantity)",fn:function(e){return[n("input",{key:"quantity"+e.item.isbn,staticStyle:{width:"60px"},attrs:{type:"number",min:"1",max:"100",onkeydown:"return false;",oncut:"return false;",onpaste:"return false;"},domProps:{value:e.item.quantity},on:{input:function(n){return t.changeQuantity(n,e.item.isbn)}}}),t.isSmallAmount(e.item.isbn)?n("div",{staticClass:"mt-1 text-danger"},[t._v(" 只剩 "+t._s(t.getInventory(e.item.isbn))+" 件 ")]):t._e()]}},{key:"cell(subtotal)",fn:function(e){return[n("span",{domProps:{textContent:t._s(t.calSubTotal(e))}})]}},{key:"cell(changeItem)",fn:function(e){return[n("b-button",{attrs:{variant:"outline-dark"},on:{click:function(n){return t.deleteItem({isbn:e.item.isbn})}}},[t._v("刪除")])]}}])}),n("div",{staticClass:"d-flex bg-light"},[n("div",{staticClass:"p-3 mr-auto"},[n("b-button",{attrs:{variant:"outline-dark"},on:{click:t.deleteSelected}},[t._v("刪除勾選項目")])],1),n("div",{staticClass:"d-flex align-items-center"},[n("p",{staticClass:"mt-3 mr-3"},[t._v(" 共 "),n("span",{staticClass:"text-danger"},[t._v(t._s(t.items.length))]),t._v(" 項商品，數量 "),n("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.totalQuantity())}}),t._v(" 個，總金額 NT$ "),n("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.totalAmount())}}),t._v(" 元 ")])])]),n("div",{staticClass:"text-right mt-3"},[n("b-button",{staticClass:"mr-3",attrs:{variant:"outline-primary"},on:{click:t.goHome}},[t._v("繼續購物")]),n("b-button",{staticClass:"mr-3",attrs:{disabled:0==t.items.length||isNaN(t.totalQuantity()),variant:"outline-primary"},on:{click:t.goDeliver}},[t._v("結帳")])],1)],1)],1)],1)],1)],1)],1)},i=[],o=(n("7db0"),n("4160"),n("d81d"),n("13d5"),n("a9e3"),n("8ba4"),n("159b"),n("5530")),a=(n("7947"),n("a49b")),c=n("2f62"),s=n("4360"),u=n("5ce5"),l={name:"Shoppingcart",data:function(){return{allSelected:!1,headVariant:"dark",fields:a["b"].shoppingcartFields}},components:{},mounted:function(){},beforeCreate:function(){console.log("Shoppingcart.vue beforeCreate")},beforeRouteEnter:function(t,e,n){console.log("Shoppingcart.vue beforeRouteEnter");var r=s["a"].getters["cart/cartProducts"],i=s["a"].getters["cart/cartProducts"].map((function(t){return t.isbn}));console.log("Shoppingcart.vue beforeRouteEnter isbnArray",i),i.length?u["a"].post("products/inventory",{isbn:i}).then((function(t){console.log("Shoppingcart.vue beforeRouteEnter response : "+JSON.stringify(t)),n((function(e){t.data.forEach((function(t){e.updateInventory(t);var n=r.find((function(e){return e.isbn===t.isbn}));t.inventory<n.quantity&&e.setQuantityInCart(t.isbn,t.inventory)}))}))})).catch((function(t){console.log("err : "+t),console.log("err.response : "+JSON.stringify(t.response))})):n()},computed:{items:function(){return this.$store.getters["cart/cartProducts"]},products:function(){return this.$store.getters["products/getItems"]}},methods:Object(o["a"])(Object(o["a"])({updateInventory:function(t){console.log("Shoppingcart.vue updateInventory",JSON.stringify(t)),this.$store.dispatch("products/changeInventory",t)},goHome:function(){this.$router.push({name:"index"})},goDeliver:function(){this.$router.push({name:"deliver"})},getInventory:function(t){var e=this.products.find((function(e){return e.isbn===t}));return e?e.inventory:0},isSmallAmount:function(t){return this.getInventory(t)<=10},salePrice:function(t){return t.item.salePrice=this.calSalePrice(t.item.listPrice,t.item.discount),t.item.salePrice},calSalePrice:function(t,e){return Math.round(t*e/100)},calSubTotal:function(t){return t.item.salePrice*t.item.quantity},setChecked:function(t){console.log(t.target.id,t.target.checked,t.target.value),this.$store.dispatch("cart/setChecked",{isbn:t.target.value,checked:t.target.checked})},setQuantityInCart:function(t,e){this.$store.dispatch("cart/changeQuantity",{isbn:t,quantity:e}).then((function(t){console.log("setQuantityInCart response",t)})).catch((function(t){console.log("setQuantityInCart err",t)}))},changeQuantity:function(t,e){var n=this;console.log(t.target.value,Number.isInteger(t.target.value),e),this.$store.dispatch("cart/changeQuantity",{isbn:e,quantity:parseInt(t.target.value,10)}).then((function(t){console.log("response",t)})).catch((function(t){n.$store.dispatch("modal/setModalMsg",t),n.$store.dispatch("modal/setModalShow",!0)}))}},Object(c["b"])("cart",["deleteItem","toggleAll"])),{},{deleteSelected:function(){this.$store.dispatch("cart/deleteSelected"),this.allSelected=!1},totalQuantity:function(){return this.items.map((function(t){return parseInt(t.quantity,10)})).reduce((function(t,e){return t+e}),0)},totalAmount:function(){var t=this;return this.items.map((function(e){return t.calSalePrice(e.listPrice,e.discount)*parseInt(e.quantity,10)})).reduce((function(t,e){return t+e}),0)}})},f=l,d=n("2877"),p=Object(d["a"])(f,r,i,!1,null,"1b84c360",null);e["default"]=p.exports},e439:function(t,e,n){var r=n("23e7"),i=n("d039"),o=n("fc6a"),a=n("06cf").f,c=n("83ab"),s=i((function(){a(1)})),u=!c||s;r({target:"Object",stat:!0,forced:u,sham:!c},{getOwnPropertyDescriptor:function(t,e){return a(o(t),e)}})},e538:function(t,e,n){var r=n("b622");e.f=r}}]);
//# sourceMappingURL=chunk-f83453bc.95057949.js.map