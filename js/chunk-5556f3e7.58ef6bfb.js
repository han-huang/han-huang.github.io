(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5556f3e7"],{"057f":function(t,e,r){var n=r("fc6a"),s=r("241c").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],i=function(t){try{return s(t)}catch(e){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?i(t):s(n(t))}},"13d5":function(t,e,r){"use strict";var n=r("23e7"),s=r("d58f").left,a=r("a640"),o=r("ae40"),i=a("reduce"),c=o("reduce",{1:0});n({target:"Array",proto:!0,forced:!i||!c},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"4cea":function(t,e,r){"use strict";var n=r("d5f5"),s=r.n(n);s.a},"4de4":function(t,e,r){"use strict";var n=r("23e7"),s=r("b727").filter,a=r("1dde"),o=r("ae40"),i=a("filter"),c=o("filter");n({target:"Array",proto:!0,forced:!i||!c},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");var n=r("ade3");function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){Object(n["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}},"746f":function(t,e,r){var n=r("428f"),s=r("5135"),a=r("e538"),o=r("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});s(e,t)||o(e,t,{value:a.f(t)})}},7947:function(t,e,r){},a4d3:function(t,e,r){"use strict";var n=r("23e7"),s=r("da84"),a=r("d066"),o=r("c430"),i=r("83ab"),c=r("4930"),l=r("fdbf"),u=r("d039"),d=r("5135"),f=r("e8b5"),m=r("861d"),b=r("825a"),p=r("7b0b"),v=r("fc6a"),g=r("c04e"),h=r("5c6c"),y=r("7c73"),C=r("df75"),O=r("241c"),w=r("057f"),S=r("7418"),_=r("06cf"),N=r("9bf2"),P=r("d1e7"),x=r("9112"),j=r("6eeb"),k=r("5692"),D=r("f772"),A=r("d012"),J=r("90e3"),R=r("b622"),I=r("e538"),T=r("746f"),$=r("d44e"),M=r("69f3"),E=r("b727").forEach,Q=D("hidden"),q="Symbol",B="prototype",H=R("toPrimitive"),F=M.set,W=M.getterFor(q),z=Object[B],L=s.Symbol,G=a("JSON","stringify"),K=_.f,U=N.f,V=w.f,X=P.f,Y=k("symbols"),Z=k("op-symbols"),tt=k("string-to-symbol-registry"),et=k("symbol-to-string-registry"),rt=k("wks"),nt=s.QObject,st=!nt||!nt[B]||!nt[B].findChild,at=i&&u((function(){return 7!=y(U({},"a",{get:function(){return U(this,"a",{value:7}).a}})).a}))?function(t,e,r){var n=K(z,e);n&&delete z[e],U(t,e,r),n&&t!==z&&U(z,e,n)}:U,ot=function(t,e){var r=Y[t]=y(L[B]);return F(r,{type:q,tag:t,description:e}),i||(r.description=e),r},it=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof L},ct=function(t,e,r){t===z&&ct(Z,e,r),b(t);var n=g(e,!0);return b(r),d(Y,n)?(r.enumerable?(d(t,Q)&&t[Q][n]&&(t[Q][n]=!1),r=y(r,{enumerable:h(0,!1)})):(d(t,Q)||U(t,Q,h(1,{})),t[Q][n]=!0),at(t,n,r)):U(t,n,r)},lt=function(t,e){b(t);var r=v(e),n=C(r).concat(bt(r));return E(n,(function(e){i&&!dt.call(r,e)||ct(t,e,r[e])})),t},ut=function(t,e){return void 0===e?y(t):lt(y(t),e)},dt=function(t){var e=g(t,!0),r=X.call(this,e);return!(this===z&&d(Y,e)&&!d(Z,e))&&(!(r||!d(this,e)||!d(Y,e)||d(this,Q)&&this[Q][e])||r)},ft=function(t,e){var r=v(t),n=g(e,!0);if(r!==z||!d(Y,n)||d(Z,n)){var s=K(r,n);return!s||!d(Y,n)||d(r,Q)&&r[Q][n]||(s.enumerable=!0),s}},mt=function(t){var e=V(v(t)),r=[];return E(e,(function(t){d(Y,t)||d(A,t)||r.push(t)})),r},bt=function(t){var e=t===z,r=V(e?Z:v(t)),n=[];return E(r,(function(t){!d(Y,t)||e&&!d(z,t)||n.push(Y[t])})),n};if(c||(L=function(){if(this instanceof L)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=J(t),r=function(t){this===z&&r.call(Z,t),d(this,Q)&&d(this[Q],e)&&(this[Q][e]=!1),at(this,e,h(1,t))};return i&&st&&at(z,e,{configurable:!0,set:r}),ot(e,t)},j(L[B],"toString",(function(){return W(this).tag})),j(L,"withoutSetter",(function(t){return ot(J(t),t)})),P.f=dt,N.f=ct,_.f=ft,O.f=w.f=mt,S.f=bt,I.f=function(t){return ot(R(t),t)},i&&(U(L[B],"description",{configurable:!0,get:function(){return W(this).description}}),o||j(z,"propertyIsEnumerable",dt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:L}),E(C(rt),(function(t){T(t)})),n({target:q,stat:!0,forced:!c},{for:function(t){var e=String(t);if(d(tt,e))return tt[e];var r=L(e);return tt[e]=r,et[r]=e,r},keyFor:function(t){if(!it(t))throw TypeError(t+" is not a symbol");if(d(et,t))return et[t]},useSetter:function(){st=!0},useSimple:function(){st=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!i},{create:ut,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ft}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:mt,getOwnPropertySymbols:bt}),n({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(p(t))}}),G){var pt=!c||u((function(){var t=L();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));n({target:"JSON",stat:!0,forced:pt},{stringify:function(t,e,r){var n,s=[t],a=1;while(arguments.length>a)s.push(arguments[a++]);if(n=e,(m(e)||void 0!==t)&&!it(t))return f(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!it(e))return e}),s[1]=e,G.apply(null,s)}})}L[B][H]||x(L[B],H,L[B].valueOf),$(L,q),A[Q]=!0},ade3:function(t,e,r){"use strict";function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"a",(function(){return n}))},d58f:function(t,e,r){var n=r("1c0b"),s=r("7b0b"),a=r("44ad"),o=r("50c4"),i=function(t){return function(e,r,i,c){n(r);var l=s(e),u=a(l),d=o(l.length),f=t?d-1:0,m=t?-1:1;if(i<2)while(1){if(f in u){c=u[f],f+=m;break}if(f+=m,t?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:d>f;f+=m)f in u&&(c=r(c,u[f],f,l));return c}};t.exports={left:i(!1),right:i(!0)}},d5f5:function(t,e,r){},d81d:function(t,e,r){"use strict";var n=r("23e7"),s=r("b727").map,a=r("1dde"),o=r("ae40"),i=a("map"),c=o("map");n({target:"Array",proto:!0,forced:!i||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},dbb4:function(t,e,r){var n=r("23e7"),s=r("83ab"),a=r("56ef"),o=r("fc6a"),i=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){var e,r,n=o(t),s=i.f,l=a(n),u={},d=0;while(l.length>d)r=s(n,e=l[d++]),void 0!==r&&c(u,e,r);return u}})},e116:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",[r("div",{staticClass:"col-md-12"},[r("div",{staticClass:"progressbar-container text-center"},[r("ul",{staticClass:"progressbar"},[r("li",{staticClass:"progressbar-done"},[t._v("檢視購物車")]),r("li",{staticClass:"progressbar-done"},[t._v("付款方式及寄送資訊")]),r("li",{staticClass:"progressbar-active"},[t._v("確認訂單資料")]),r("li",[t._v("訂單成立")])])])])]),r("b-row",{staticClass:"mt-3"},[r("b-col",{attrs:{md:"12"}},[r("b-card",{attrs:{header:"確認購物清單","header-text-variant":"dark","header-tag":"header","header-bg-variant":"muted"}},[r("b-table",{ref:"selectableTable",attrs:{striped:"",hover:"",stacked:"lg",fields:t.fields,items:t.items},scopedSlots:t._u([{key:"cell()",fn:function(e){return[r("span",{domProps:{textContent:t._s(e.value)}})]}},{key:"cell(name)",fn:function(e){return[r("router-link",{staticClass:"text-decoration-none text-primary",attrs:{to:"/product/"+e.item.isbn}},[r("span",{domProps:{textContent:t._s(e.value)}})])]}},{key:"cell(salePrice)",fn:function(e){return[r("span",{domProps:{textContent:t._s(t.salePrice(e))}})]}},{key:"cell(subtotal)",fn:function(e){return[r("span",{domProps:{textContent:t._s(t.calSubTotal(e))}})]}}])}),r("div",{staticClass:"d-flex bg-light"},[r("div",{staticClass:"ml-auto"},[r("p",{staticClass:"mt-3 mr-3"},[t._v(" 共 "),r("span",{staticClass:"text-danger"},[t._v(t._s(t.items.length))]),t._v(" 項商品，數量 "),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.totalQuantity())}}),t._v(" 個，總金額 NT$ "),r("span",{staticClass:"text-danger",domProps:{textContent:t._s(t.totalAmount())}}),t._v(" 元 ")])])])],1)],1)],1),r("b-row",{staticClass:"mt-3"},[r("b-col",{attrs:{md:"12"}},[r("b-card",{attrs:{header:"付款方式及寄送資訊","header-text-variant":"dark","header-tag":"header","header-bg-variant":"muted"}},[r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"deliver"}},[t._v("配送方式")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"deliver"}},[t._v(t._s(t.getDeliver))])])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"payment"}},[t._v("付款方式")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"payment"}},[t._v(t._s(t.getPayment))])])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"invoiceType"}},[t._v("發票資訊")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"invoiceType"}},[t._v(t._s(t.getInvoiceType))])])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"buyerName"}},[t._v("訂購人")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"buyerName"},domProps:{textContent:t._s(t.getBuyer.name)}})])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"buyerContactNumber"}},[t._v("訂購人聯絡電話")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"buyerContactNumber"},domProps:{textContent:t._s(t.getBuyer.contactNumber)}})])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"buyerMobile"}},[t._v("訂購人手機號碼")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"buyerMobile"},domProps:{textContent:t._s(t.getBuyer.mobile)}})])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"buyerAddress"}},[t._v("訂購人地址")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"buyerAddress"},domProps:{textContent:t._s(t.getBuyer.address)}})])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"receiverName"}},[t._v("收件人")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"receiverName"},domProps:{textContent:t._s(t.getReceiverName)}})])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"receiverContactNumber"}},[t._v("收件人聯絡電話")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"receiverContactNumber"}},[t._v(t._s(t.getContactNumber))])])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"receiverMobile"}},[t._v("收件人手機號碼")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"receiverMobile"}},[t._v(t._s(t.getMobile))])])],1),r("b-row",{},[r("b-col",{staticClass:"d-flex align-items-center ml-1",attrs:{md:"2"}},[r("label",{attrs:{for:"receiverAddress"}},[t._v("收件人地址")])]),r("b-col",{staticClass:"ml-1",attrs:{md:"9"}},[r("span",{attrs:{id:"receiverAddress"}},[t._v(t._s(t.getAddress))])])],1)],1),r("div",{staticClass:"d-flex justify-content-end mt-3"},[r("b-button",{staticClass:"mr-3",attrs:{variant:"outline-primary"},on:{click:function(e){return t.goDeliver()}}},[r("font-awesome-icon",{attrs:{icon:["fas","angle-double-left"]}}),t._v(" 上一步 ")],1),r("b-button",{staticClass:"mr-3",attrs:{variant:"outline-primary"},on:{click:t.checkout}},[t._v(" 確認送出 "),r("font-awesome-icon",{attrs:{icon:["fas","angle-double-right"]}})],1)],1)],1)],1),r("b-modal",{ref:"order-modal",attrs:{"hide-footer":"",title:"Demo Site"},on:{hide:t.backToHome}},[r("div",{staticClass:"d-block text-center"},[r("p",[t._v(" 感謝您的訂購，您已經完成本筆交易的訂購程序，我們將會盡快為您處理訂單並安排出貨。 ")]),r("b-table",{attrs:{stacked:"",items:t.orderItems}}),r("p",[r("a",{staticClass:"text-decoration-none",attrs:{href:"javascript:void(0)"},on:{click:t.orderDetail}},[t._v("查看訂單詳情")])]),r("img",{attrs:{src:t.getQRCode,alt:"QRCode"}})],1)])],1)},s=[],a=(r("d81d"),r("13d5"),r("b0c0"),r("5530")),o=r("2f62"),i=r("a49b"),c=(r("7947"),r("ecee")),l=r("c074"),u=r("5ce5"),d=r("325c");r("8897");c["c"].add(l["b"],l["a"]);var f={name:"Confirm",data:function(){return{fields:i["b"].confirmFields,orderNo:"20201130092604879QTP",orderDate:"2020-11-30 09:26:05",orderAmount:2127,orderItems:[],QRCode:""}},components:{},computed:Object(a["a"])(Object(a["a"])({items:function(){return this.$store.getters["cart/cartProducts"]},getDeliver:function(){return"homeDelivery"===this.getState().deliver?"宅配":"郵寄"},getPayment:function(){return"COD"===this.getState().payment?"貨到付款":""},getInvoiceType:function(){return"paper"===this.getState().invoiceType?"紙本發票":""},getReceiverName:function(){return this.isReceiverInfoNew()?this.getState().receiverName:this.getBuyer.name},getContactNumber:function(){if(this.isReceiverInfoNew()){var t=0==this.getState().receiverExt.length?"":" 分機 "+this.getState().receiverExt;return this.getState().receiverArea+"-"+this.getState().receiverPhone+t}return this.getBuyer.contactNumber},getMobile:function(){return this.isReceiverInfoNew()?this.getState().receiverMobile:this.getBuyer.mobile},getAddress:function(){return this.isReceiverInfoNew()?this.getState().zipcode+this.getState().county+this.getState().district+this.getState().receiverAddress:this.getBuyer.address}},Object(o["c"])("auth",["getBuyer"])),{},{getQRCode:function(){return this.QRCode}}),methods:Object(a["a"])(Object(a["a"])({},Object(o["c"])("deliver",["getState"])),{},{isReceiverInfoNew:function(){return"new"===this.getState().receiverInfo},goDeliver:function(){this.$router.push({name:"deliver"})},salePrice:function(t){return t.item.salePrice=this.calSalePrice(t.item.listPrice,t.item.discount),t.item.salePrice},calSalePrice:function(t,e){return Math.round(t*e/100)},calSubTotal:function(t){return t.item.salePrice*t.item.quantity},totalQuantity:function(){return this.items.map((function(t){return parseInt(t.quantity,10)})).reduce((function(t,e){return t+e}),0)},totalAmount:function(){var t=this;return this.items.map((function(e){return t.calSalePrice(e.listPrice,e.discount)*parseInt(e.quantity,10)})).reduce((function(t,e){return t+e}),0)},createReqObj:function(){for(var t=this.items.map((function(t){var e={};return e["isbn"]=t.isbn,e["quantity"]=t.quantity,e})),e=JSON.parse(JSON.stringify(this.getState())),r=["receiverNameState","receiverAreaState","receiverPhoneState","receiverExtState","receiverMobileState","receiverAddressState"],n=0,s=r;n<s.length;n++){var a=s[n];delete e[a]}console.log(JSON.stringify(t),JSON.stringify(e));var o={};return o["bookList"]=t,o["deliver"]=e,o},checkout:function(){var t=this,e=this.createReqObj();console.log(JSON.stringify(e)),u["a"].setHeader(),u["a"].post("order/create",e).then((function(e){console.log("Confirm.vue checkout response : "+JSON.stringify(e)),u["a"].deleteHeader(),t.$store.dispatch("cart/clearState"),t.$store.dispatch("deliver/clearState"),t.completeOrder(e.data),t.$router.push({name:"complete"})})).catch((function(e){console.log("err : "+e),console.log("err JSON.stringify : "+JSON.stringify(e)),console.log("err.response : "+JSON.stringify(e.response)),u["a"].deleteHeader();var r="";e.response.data.errors?(r="數量不可為 0 , 請修改訂單",console.log("err.response.data.errors",e.response.data.errors)):(console.log("err.response.data.message",e.response.data.message),r=d["a"].checkJWTExpired(e,t)),t.$store.dispatch("modal/setModalMsg",r),t.$store.dispatch("modal/setModalShow",!0)}))},completeOrder:function(t){var e={"訂單編號":t.orderNo,"訂單日期":t.orderDate,"訂單金額":t.orderAmount},r=[e];this.$store.dispatch("complete/setOrderItems",r),this.$store.dispatch("complete/setQRCode",t.qrcode),this.$store.dispatch("complete/setOrderNo",t.orderNo)},showOrder:function(t){this.orderNo=t.orderNo;var e={"訂單編號":t.orderNo,"訂單日期":t.orderDate,"訂單金額":t.orderAmount};this.QRCode=t.qrcode;var r=[e];this.orderItems=JSON.parse(JSON.stringify(r)),this.$refs["order-modal"].show()},showModal:function(){var t={"訂單編號":this.orderNo,"訂單日期":this.orderDate,"訂單金額":this.orderAmount},e=[t];this.orderItems=JSON.parse(JSON.stringify(e)),this.$refs["order-modal"].show()},orderDetail:function(){this.$router.push({path:"/order/".concat(this.orderNo)}).catch((function(t){return console.log(t)}))},backToHome:function(){this.$router.push({name:"index"})}}),mounted:function(){},created:function(){}},m=f,b=(r("4cea"),r("2877")),p=Object(b["a"])(m,n,s,!1,null,null,null);e["default"]=p.exports},e439:function(t,e,r){var n=r("23e7"),s=r("d039"),a=r("fc6a"),o=r("06cf").f,i=r("83ab"),c=s((function(){o(1)})),l=!i||c;n({target:"Object",stat:!0,forced:l,sham:!i},{getOwnPropertyDescriptor:function(t,e){return o(a(t),e)}})},e538:function(t,e,r){var n=r("b622");e.f=n}}]);
//# sourceMappingURL=chunk-5556f3e7.58ef6bfb.js.map